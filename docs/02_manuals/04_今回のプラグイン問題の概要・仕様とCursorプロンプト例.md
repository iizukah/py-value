# 今回のプラグイン問題の概要・仕様と Cursor プロンプト例（EXER）

## 1. 概要

データ分析プラグイン（python-analysis）で扱った問題の概要・仕様と、Cursor に問題を指示する際のプロンプト例をまとめる。トレーサビリティ用の ID は docs/01_specs/99_diff/01_2025-02-08.md を参照する。

---

## 2. 扱った問題の概要・仕様

| 項目 | 概要・仕様 |
|------|------------|
| **HTML 混入** | コピペ時に HTML タグがコードに入り込む問題。対策: ペースト時にサニタイズ（\r\n 正規化、stripHtmlToPlainText 等）。DD-030 で言及。 |
| **Monaco 導入** | プレーンテキストから Monaco Editor による Python シンタックスハイライト・編集に変更。DD-022。コード入力は差し替え可能設計（CodeInputWithHighlight）。 |
| **セル Run（Jupyter 相当）** | 単一 textarea から複数セルに変更。セル単位で Run し、実行結果を Variable Watcher とセル下に表示。状態はセル間で共有。FR-P001, DD-010。 |
| **右ペイン表記** | VARIABLE WATCHER と RESULT PLOT のプレースホルダーを英語で統一。採点結果ブロックの位置・マージン（左ペインで採点結果と問題文の間に mt-4 等）。CD-016～020, DD-026。 |
| **採点結果時の問題一覧** | 採点結果表示時に中央ペインで「次の問題に挑戦！」とランダム最大10問を表示。Retry で非表示。DD-021, DD-026, DD-032。 |
| **Pyodide ローディング** | ワークスペース遷移時に Pyodide をプリロードし、完了まで全画面オーバーレイを表示。DD-023。 |

---

## 3. Cursor に問題を指示する場合のプロンプト例

### 3.1 セル Run を Jupyter 相当にしたい場合

```
データ分析プラグインのワークスペースで、セル単位で Run できるようにしてほしい。
- 各セルに Run ボタンを付け、押下でそのセルのみ実行する。
- 実行結果（変数一覧・stdout/stderr）は Variable Watcher とセル直下に表示する。
- セル間で実行状態（変数）は共有する。採点時は全セルのコードを結合して 1 スクリプトとして実行する。
仕様: REQ-02 FR-P001, docs/01_specs/99_diff/01_2025-02-08.md の DD-010 を参照。
```

### 3.2 右ペインのプレースホルダーを英語に揃えたい場合

```
ワークスペースの右ペインで、VARIABLE WATCHER と RESULT PLOT のプレースホルダー表記を英語で統一してほしい。
未表示時は "VARIABLE WATCHER" / "RESULT PLOT" のようなラベルを表示する。仕様: CD-016, 01_2025-02-08.md。
```

### 3.3 採点結果と問題文の間にマージンが欲しい場合

```
左ペインで、採点結果ブロックと問題文の間にマージン（例: mt-4）を入れてほしい。仕様: 01_2025-02-08.md 左ペイン・採点結果まわり。
```

### 3.4 コード入力に Monaco（ハイライト）を入れたい場合

```
ワークスペースのコード入力を Monaco Editor で行い、Python のシンタックスハイライトを付けてほしい。
差し替え可能な設計（例: CodeInputWithHighlight でラップ）にすること。仕様: DD-022, 01_2025-02-08.md。
```

---

## 4. 参照

- docs/01_specs/99_diff/01_2025-02-08.md（統合差分・ID 対応表）
- REQ-02 データ分析プラグイン要件
- UX-03 プラグイン UI/UX
