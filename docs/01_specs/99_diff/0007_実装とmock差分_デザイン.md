# 0007 実装と mock 差分（デザイン・構造・クラス名）

## 日付

2026-02-08

## 目的

- **参照**: [docs/01_specs/04_ui_ux/reference/mock.html](../04_ui_ux/reference/mock.html)（確定仕様）と現行実装の**構造・クラス名・トークン・レイアウト・コンポーネント**の差分を一覧化する。
- 後工程で mock に可能な限り準拠した Web デザインに修正する際の入力とする。
- UI/UX の一次ソースは HIG / Material / WCAG とする（.cursor/rules/specs-and-ux-sources.mdc）。mock は仕様の参考として差分のみ記録する。

---

## 1. 全体構造

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| アプリ形態 | 単一 HTML、ハッシュルーティング（#/py-value, #/py-value/questions/xxx）。`#panel-*` でパネル切替。 | Next.js App Router。URL 別ページ（/, /py-value, /py-value/questions/[questionId] 等）。 | ルーティング方式が異なる。見た目を mock に寄せる場合はコンポーネント単位でクラス・レイアウトを合わせる。 |
| メインコンテナ | `<main class="main-content">` + `.panel` / `.panel.active` | 各 page.tsx が `<div className="mx-auto max-w-4xl p-6">` 等でラップ。layout で Header/Footer を共通表示。 | 実装に `main-content` の class はなし。max-width は 4xl 等で指定。 |

---

## 2. CP-001 ヘッダ（app-header）

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| クラス名 | `app-header`, `logo-link`, `logo`, `nav`, ナビは `border-radius: 999px` + アイコン | `Header.tsx`: `border-b px-4 py-3`, `max-w-4xl`, テキストのみのナビ（アイコンなし） | mock は `.app-header` で glass（backdrop-filter）、sticky。実装は sticky なし・アイコンなし。 |
| ロゴ | SVG（path + circle + text "EXER"）、`logo-glow`、`font-logo`（Space Grotesk） | テキスト "EXER" のみ。font は `var(--font-space-grotesk)` で指定。 | mock はロゴ SVG あり。実装はテキストのみ。 |
| ナビ項目順 | 問題一覧 → お気に入り → 履歴 → 管理（Lucide アイコン付き） | 同一順。アイコンなし。 | アイコン追加で mock に寄せ可。 |
| スタイル | `background: var(--glass-bg)`, `backdrop-filter: blur(12px)`, `position: sticky; top: 0; z-index: 100` | `backgroundColor: var(--color-bg-secondary)`。sticky なし。 | glass・sticky を実装に入れると mock に近づく。 |

---

## 3. パンくず（breadcrumb）

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| 有無 | `.breadcrumb` が main 直上にあり、`#breadcrumb` で中身を JS で更新。ホーム時は非表示。 | 問題ページ（questions/[questionId]/page.tsx）のみ「ホーム / ワークブック / 問題名」をインラインで表示。一覧・履歴・お気に入り等は共通パンくずコンポーネントなし。 | mock は全画面でパンくずを切り替え。実装は問題ページのみ簡易表示。 |
| クラス | `breadcrumb-sep`, `breadcrumb-workbook-link`、Lucide chevron-right / home | 単なる Link + span。クラス名は Tailwind 中心。 | デザインを揃える場合は共通 Breadcrumb コンポーネント化とクラス名の取り込みを検討。 |

---

## 4. CP-000 ファーストビュー（SC-000 ホーム）

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| 背景レイヤー | `#home-bg-layer`（グリッド線アニメーション + fv-shape + fv-light-sweep）。`body.home-bg-visible` で表示。 | なし。単色背景。 | mock はホーム専用の背景アニメあり。実装に持っていく場合は CP-000 用の背景コンポーネントを追加。 |
| ヒーロー文言 | `first-view-hero`: "Exercise the **Mind**, Master the **Skill**."（text-gradient-emerald / text-gradient-blue） | "EXER" + "Exercise the Mind, Master the Skill."（グラデーションなし） | 見出しレベルとグラデーションの有無が異なる。 |
| CTA | `first-view-cta` 内の `.btn-get-started`（GET STARTED） | GET STARTED リンクあり。スタイルは Tailwind + トークン。 | 文言は同等。ボタン形状は mock の方が大きめ（padding 14px 32px）。 |
| ワークブックカード | `workbook-cards` 内の `workbook-card`（Pythonデータ分析・Coming Soon 等）。glass・hover で枠色変化。 | ホームにはワークブックカードなし。GET STARTED で /py-value へ直リンク。 | mock はホームで複数ワークブックをカード表示。実装は 1 ワークブック前提でカードなし。 |
| クラス名 | `first-view`, `first-view-logo`, `first-view-hero`, `first-view-cta`, `workbook-card`, `workbook-card-disabled` | `HomePage`: region + h1 + p + Link。クラス名は Tailwind のみ。 | セマンティックなクラス名を入れると mock と対応付けしやすい。 |

---

## 5. SC-001 問題一覧（question tiles）

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| ソート UI | `#list-sort` 内の `.btn`（登録順・難易度・タイトル・お気に入り数）。`data-sort` で選択。選択時 `btn-secondary`、非選択時 `btn-ghost`。 | `QuestionListClient`: sort は Link のリンク群。`sortOption === value` で primary 相当のスタイル。 | mock はボタン、実装はリンク。見た目は似せることは可能。 |
| タグフィルター | `.tag-filter-row` + `.tag-pill`（active 時 border/background 変化） | タグは Link でクエリ付与。`aria-pressed` あり。 | クラス名 `tag-pill` / `active` を実装に取り込むと mock と一致。 |
| タイルコンテナ | `.question-tiles`（`grid-template-columns: repeat(3, 1fr)`） | `ul` + `grid gap-4 sm:grid-cols-2 lg:grid-cols-3` | 3 列は lg で一致。gap は space-4 で類似。 |
| タイル 1 枚 | `.question-tile`。`.tile-header`（tile-subtitle + tile-title-row + tile-difficulty + tile-display-title）、`.tile-body`（tile-body-left: tile-tags + tile-excerpt、tile-body-right: badge）、`.tile-footer`（btn-favorite-block + Try） | `QuestionCard`: li 内でタイトル + Badge + タグ + お気に入りボタン + 数。**問題文抜粋（excerpt）なし**。カード全体が問題ページへのリンクではなく、タイトルが Link。 | mock は CHALLENGE 00 のような tile-subtitle、難易度アイコン、抜粋、右側に円形バッジ。実装は抜粋なし・バッジはラベル風（合格/不合格/未挑戦）。 |
| バッジ | `.badge`（badge-pass / badge-fail / badge-none）。円形でアイコン（award, x-circle, circle-dashed）。タイル右側に 90px 円。 | テキストバッジ（"合格"/"不合格"/"未挑戦"）。円形アイコンなし。 | mock に合わせる場合は円形バッジ + Lucide アイコンを採用。 |
| お気に入り | `.btn-favorite-block`（ハートアイコン + tile-favorite-count）。ブロック全体がボタン。 | ハート文字（♥/♡）+ 数。ボタンは小さい。 | ブロックスタイル・アイコンにすると mock に近い。 |

---

## 6. SC-002 ワークスペース（3-pane）

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| レイアウト | `.three-pane`（grid 25% 1fr 30%）。`.pane`、`.workspace-problem-pane`、セルは `.cell-group-ws` + `.cell-box`。 | 問題ページは 1 カラム。プラグイン（python-analysis）内でエディタ + 実行・採点 + 採点結果。3 ペイン分割なし。 | mock は左問題・中央エディタ・右 Variable Watcher/Plot。実装は縦積み。 |
| ツールバー | `.workspace-toolbar`（下書き保存・解答送信） | プラグイン内に「実行・採点」ボタン。下書きは別途ある場合あり。 | ボタン文言・配置を mock に寄せる場合は toolbar を共通化。 |
| 採点結果（ワークスペース内） | `.workspace-judge-success` / `.workspace-judge-fail`、採点結果テキスト | プラグイン内で `displayResult` 時にブロック表示。Passed/Fail + Retry + 完了画面へ。 | クラス名 `workspace-judge-success` 等を付与すると mock と対応。 |

---

## 7. SC-003 採点結果

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| 表示場所 | 専用パネル `#panel-result`。`#/py-value/result/:questionId` で表示。 | ワークスペース内（同一ページ）に採点結果ブロックを表示。専用「採点結果ページ」はない。 | mock は結果専用画面に遷移。実装は遷移せずワークスペース内に表示。 |
| レイアウト | `.result-layout`、`.result-medal-wrap`、`.result-grading-loading`（スピナー + "採点中"）、`.result-badge-block`（`.result-status-badge` 112px 円 + `.result-status-label` "Passed"/"Fail"）、`.result-tile`（問題タイル風・アニメ resultTileAppear） | プラグイン内: 採点結果ブロックに「Passed」/「Fail」ラベル + Retry + 完了画面へ。大きなメダル風バッジはなし。 | mock は大きな円形バッジ + ラベル + 結果タイル。実装はコンパクトなバッジ風 + ボタン。 |
| クラス名 | `result-status-badge`, `badge-pass`/`badge-fail`, `result-tile`, `tile-footer-actions-vertical` | data-sc="SC-003"、Tailwind 中心。 | クラス名を揃えるとスタイルの共通化が容易。 |

---

## 8. SC-004 完了画面

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| クラス | `.center-block`、`.card`、`label`、`typography-heading`、「おめでとうございます。全問正解です。」+ 一覧へ戻る | `CompletePage`: max-w-md、お疲れさまです + 全問題に正解しました + 一覧へ戻る | 文言が mock と異なる。max-width は center-block と類似（480px vs md）。 |
| レイアウト | center-block で中央寄せ・カード風 | 中央寄せ。カード枠はなし。 | カード＋ラベルを入れると mock に近い。 |

---

## 9. SC-005 / SC-006 履歴一覧・詳細

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| 一覧 | `.history-table`（問題・結果・日時・操作）、`.btn-history-back-wrap` | `HistoryListClient`: テーブルまたはリストで表示。一覧へ戻るボタンあり。 | クラス名 `history-table` を実装に持っていくと揃う。 |
| 詳細 | `.history-detail-tile`、`.history-detail-problem`、`.history-detail-user-answer`、`.history-detail-user-answer-body`、JudgedAt 表示、ReTry ボタン | `HistoryDetailClient`: 問題文・回答・採点日時・Retry 等。構造は類似。 | クラス名を mock に合わせると保守しやすい。 |

---

## 10. SC-011 お気に入り一覧

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| コンテナ | `#favorites-tiles`（question-tiles と同様のタイル）、`#favorites-zero`（0 件時） | `FavoritesListClient`: 一覧表示。0 件時メッセージあり。 | タイルの見た目を SC-001 と統一すると mock と同様。 |
| 戻る | `#btn-favorites-back`（一覧へ戻る） | 一覧へ戻るリンク/ボタンあり。 | 同等。 |

---

## 11. SC-007～SC-010 管理画面

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| キー | `#admin-key-required`（?key=xxx 必須）、`#admin-dashboard` | 管理画面は別ルート。キーは URL または環境で扱う想定。 | 画面構成はワイヤーフレームと実装で対応。 |
| エディタ | `#panel-admin-edit`、`.form-group`、`edit-title` 等、ステータス（下書き/公開）ボタン | `QuestionEditorClient` 等。フォーム項目は同等。 | クラス名 `form-group` 等を揃え可。 |
| インポート/データセット | `.file-input-hidden`、`.file-input-trigger` | ファイル入力あり。 | スタイルを mock に寄せ可。 |

---

## 12. フッター（app-footer）

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| クラス | `.app-footer`（fixed bottom、border-top、flex、footer-status、.online "● SYSTEM ONLINE"、NODE_ENV、EXER FRAMEWORK © 2026） | `Footer`: border-t、SYSTEM ONLINE \| EXER FRAMEWORK。**fixed なし**。 | mock は fixed。実装は通常フロー。NODE_ENV 表記の有無。 |

---

## 13. デザイントークン・その他

| 項目 | mock.html | 現行実装 | 差分メモ |
|------|-----------|----------|----------|
| トークン | UX-04 と整合（--color-*, --space-*, --radius-*, --tile-min-width/height, --center-block-max-width, --glass-bg/border） | globals.css で同様のトークン定義あり。 | おおむね一致。 |
| ローディング | `#loading-overlay`、`.stats-loader`（棒アニメ）、`.scanning-line`、`.loading-text` | 各所で loading 状態はあるが、共通のオーバーレイ・アニメは実装次第。 | mock は全画面用 loading オーバーレイ。 |
| ホーム以外の背景 | `#non-home-bg-layer`（non-home-hero-bg + non-home-grid-overlay） | なし。 | 実装に持っていく場合は body クラスで切替。 |
| エラーブロック | `.error-block`（FR-P011） | エラー表示は各コンポーネントで実施。クラス名は未統一。 | error-block を共通クラスにすると mock と揃う。 |

---

## 14. まとめ（後工程で mock に寄せる場合の優先度例）

1. **クラス名の対応**: 実装側に mock のセマンティッククラス（question-tile, tile-header, result-status-badge, center-block 等）を data 属性または className で付与すると、CSS の共通化や仕様との対応がしやすい。
2. **CP-001**: ヘッダの glass・sticky・ロゴ SVG・ナビアイコン。
3. **CP-000**: ホームの背景レイヤー・ヒーローグラデーション・ワークブックカード。
4. **SC-001**: タイルの subtitle（CHALLENGE 00）、抜粋、円形バッジ、お気に入りブロックスタイル。
5. **SC-003**: 専用結果画面にするかは仕様次第。同じページ内なら result-medal-wrap / result-status-badge の見た目を mock に寄せる。
6. **パンくず**: 全画面共通 Breadcrumb コンポーネントと mock クラス名。
7. **フッター**: fixed 化と NODE_ENV 表記の要否。

---

## 関連ドキュメント

- [0006_実装とmock差分_WCAG仕様正本.md](0006_実装とmock差分_WCAG仕様正本.md)（WCAG・仕様正本との対比）
- docs/01_specs/04_ui_ux（UX-01, UX-04, 画面仕様）
- .cursor/rules/specs-and-ux-sources.mdc（HIG / Material / WCAG）
