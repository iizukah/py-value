# 0019 管理画面・E2E 拡充フェーズ完了

## 日付

2025-02-07

## 変更内容（レビュー結果）

- **管理系 API（API-010～017）** を Route Handler で実装。key 検証（validateAdminKey）・既存サービス（admin-question-service）呼び出し。API-017 データセットは開発時は data/datasets へ保存。
- **管理画面 UI（SC-007～SC-010）** を実装。SC-007 ダッシュボード（問題一覧・新規作成・編集・削除・インポート/エクスポート・データセットへのナビ）、SC-008 問題登録エディタ（新規/編集）、SC-009 インポート/エクスポート、SC-010 データセットアップロード。`?key=xxx` 必須、未指定時はメッセージ表示。
- **E2E** TC-E2E-08（履歴一覧・詳細）、TC-E2E-09～10（お気に入り一覧・挑戦）、TC-E2E-11～12（管理ダッシュボード→エディタ・インポート/エクスポート・データセット導線）、TC-E2E-13（キーボード操作）を追加。history.spec.ts、favorites.spec.ts、admin.spec.ts、keyboard.spec.ts を追加。
- **結合テスト** api-admin.test.ts を追加（key 検証・GET 一覧・GET export）。
- **infra** reference.md に E2E 用 ADMIN_API_KEY の記載を追加。playwright.config の webServer に ADMIN_API_KEY を渡す設定を追加。

## トレーサビリティ

- TEST-01（TC-E2E-08～13）
- UX-01（SC-007～SC-010）、UX-02（CP-011～CP-014）
- API-01（API-010～API-017）
- REQ-01 FR-F011～FR-F015、UC-F06～UC-F08、NFR-F004

## 関連ドキュメント

- docs/01_specs/05_test/TEST-01_test_plan.md
- docs/01_specs/04_ui_ux/UX-01_screens.md、UX-02_components.md
- docs/01_specs/03_contracts/API-01_rest_contract.md
- docs/99_history/0018_フロントエンド結合E2E必須範囲完了.md

## 次フェーズ（アーキテクト記載）

- **データセット本番ストレージ**: API-017 の本番向け（Firebase Storage 等）実装。infra-engineer / backend-coder。
- **E2E CI 組み込み**: TC-E2E-01～13 の CI 実行と安定化。infra-engineer / debugger。
- **i18n 準備**: FR-F015 に基づく他言語対応の準備（必要に応じて）。writer / frontend-coder。
- **reviewer**: 本フェーズ完了コミットの監査と 99_history との突き合わせ。
