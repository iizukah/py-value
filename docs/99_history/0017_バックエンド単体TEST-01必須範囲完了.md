# 0017 バックエンド単体テスト TEST-01 必須範囲完了

## 日付

2025-02-07

## 変更内容

- **TEST-01 必須のバックエンド単体テスト（TC-001～TC-015, TC-P01～TC-P07）** を実装・追加し、`npm run test` で全パスする状態にした。
- **Phase 1**: QuestionService / Lowdb QuestionRepository の sort（order, difficulty, title, favorites）と tags フィルターを実装。TC-003, TC-004, TC-014 一部, TC-P04 の単体テストを追加。
- **Phase 2**: Draft / History / Favorite の Repository（インターフェース＋Lowdb 実装）と Service を実装。TC-005, TC-006, TC-007 の単体テストを追加。
- **Phase 3**: 解答送信フロー（submit-service）と POST submit API Route を実装。TC-008, TC-015 の単体テストを追加。
- **Phase 4**: 管理系キー検証（admin-key）、問題 CRUD（QuestionRepository 拡張）、インポート・エクスポート（admin-question-service）を実装。TC-010～TC-013 の単体テストを追加。
- **Phase 5**: GET questions のレスポンスに favoriteCount を含めるよう QuestionService を拡張。TC-014 完了。
- **Phase 6**: プラグイン単体（judge の withTimeout, getWatchVariableValues, computeCorrelation, getCombinedCode の TC-P07）を実装・テスト。TC-P02, TC-P03, TC-P05, TC-P06, TC-P07 の単体テストを追加。
- 単体テストは **src/tests/unit/** に配置。全 71 テスト（単体＋既存結合）がパス。

## 関連ドキュメント

- docs/01_specs/05_test/TEST-01_test_plan.md
- docs/01_specs/02_architecture/ARC-01_system_design.md
- docs/01_specs/03_contracts/API-01_rest_contract.md
- docs/01_specs/03_contracts/DATA-01_shared_types_and_schemas.md

## 次フェーズ（プラン記載）

- **frontend-coder**: 採点結果画面（SC-003）、問題一覧・ワークスペース・履歴・お気に入り等の UI 実装。E2E（TC-E2E-01～07 等）の拡充。
- **web-designer**: ワイヤーフレーム未反映の解消（99_diff 0004）、アクセシビリティ・HIG/Material/WCAG に沿った UI 要件の整理。
- **reviewer**: 直近コミットの監査と本エントリとの突き合わせ。
