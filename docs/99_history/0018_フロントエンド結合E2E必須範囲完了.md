# 0018 フロントエンド・結合・E2E 必須範囲完了

## 日付

2025-02-07

## 変更内容（レビュー結果）

- **TEST-01 必須の結合テスト（TC-INT-01, 02, 03, 10, 11, 12）** および **E2E（TC-E2E-01～TC-E2E-07）** を実装・追加し、一括実行でパスする状態とした。
- **Phase 1**: 履歴・お気に入り・下書きの API（API-005, 006, 007, 008, 018～020）を実装。結合テスト api-questions（TC-INT-11）、api-submit（TC-INT-12）、api-histories（TC-INT-13）を追加。
- **Phase 2**: 採点結果画面 SC-003 の UI 整備（バッジ Passed/Fail、Retry、一覧へ戻る）。プラグイン内採点結果ブロックと POST submit 連携。
- **Phase 3**: 問題一覧の sort/tags/favoriteCount API 接続、ワークスペースでの解答送信と X-Client-Id 付与。
- **Phase 4**: 履歴一覧・詳細、お気に入り一覧・解除の API 接続。表示は「合格」「不合格」で統一。
- **Phase 5**: ワイヤーフレーム（99_diff 0004）の反映。ヘッダに「お気に入り」、ソートに「お気に入り数」、バッジ「合格」「不合格」、一覧下部「履歴へ」削除。
- **Phase 6**: E2E TC-E2E-03（ソート・カード選択）、04（ワークスペース遷移）、05（解答送信→採点結果）、06（完了画面 SC-004）、07（一覧へ戻る）を list-and-workspace.spec.ts に追加。完了画面ルート `[workbookId]/complete` を追加。
- **Phase 7**: 単体・結合 77 テストおよび E2E 7 テストを一括実行し、必須範囲がパスすることを確認。

## トレーサビリティ

- TEST-01（TC-INT-xx, TC-E2E-01～07）
- UX-01（SC-001～SC-004）、UX-02（CP-009, CP-010）
- API-01（API-005, 006, 007, 008, 018～020）
- 99_diff 0002（採点結果 MVP 許容）、0004（ワイヤーフレーム整合）

## 関連ドキュメント

- docs/01_specs/05_test/TEST-01_test_plan.md
- docs/01_specs/04_ui_ux/UX-01_screens.md, UX-02_components.md
- docs/01_specs/03_contracts/API-01_rest_contract.md
- docs/01_specs/99_diff/0002_採点結果画面_未対応TODO.md, 0004_stage2_specs_consistency_check.md

## 次フェーズ（アーキテクト記載）

- **管理画面・インポート/エクスポート UI**: SC-007～SC-010、E2E TC-E2E-11, TC-E2E-12。backend-coder / frontend-coder / web-designer。
- **E2E 拡充**: TC-E2E-08（履歴一覧・詳細）、TC-E2E-09～10（お気に入り）、TC-E2E-13（キーボード操作）。debugger / frontend-coder。
- **reviewer**: 本フェーズ完了コミットの監査と 99_history との突き合わせ。
