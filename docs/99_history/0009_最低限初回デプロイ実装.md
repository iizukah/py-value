# 0009 最低限初回デプロイの実装

## 日付

2026-02-07

## 変更概要

計画「最低限初回デプロイ計画」に従い、Phase 0～6 を実装した。

- **Phase 0**: Next.js 初期化（TypeScript, App Router, Tailwind）、src 構成（app, app/api, core, core/plugins, core/repositories, core/services, lib）、firebase.json / firestore.rules、.cursor 運用は既存のまま。
- **Phase 1**: 共有型（DATA-01, DATA-02）、WorkbookRepository / QuestionRepository インターフェース、Lowdb / Firestore 実装、DATA_SOURCE による切り替え。
- **Phase 2**: GET /api/workbooks, /api/workbooks/[workbookId], /api/workbooks/[workbookId]/questions, /api/workbooks/[workbookId]/questions/[questionId]。
- **Phase 3**: プラグインレジストリ（registerPlugin / getPlugin）、python-analysis プラグイン（Pyodide による value_match・ans のみ）、ワークスペース UI（エディタ・実行・採点結果表示）。POST submit API は未実装（クライアントのみ採点）。
- **Phase 4**: 共通レイアウト（ヘッダ・フッター）、ホーム（SC-000）、問題一覧（SC-001）、ワークスペース・採点結果（SC-002, SC-003）、お気に入り・履歴・管理の導線（簡易表示）。
- **Phase 5**: 単体テスト（パンくず、プラグインレジストリ、Lowdb Repository、value_match 許容誤差）、vitest 設定。
- **Phase 6**: シードデータ（data/workbooks.json, data/questions.json：ワークブック 1 件・問題 5 問）、本番用シードスクリプト（scripts/seed-firestore.mjs）、seed README と reference.md の更新。

## 関連ドキュメント

- 計画: 最低限初回デプロイ計画（.cursor/plans またはユーザー確認済みプラン）
- docs/01_specs（ARC-01, DATA-01, DATA-02, API-01, INFRA-01, TEST-01）
- docs/01_specs/06_operations/seed/README.md
- .cursor/skills/infra-engineer/reference.md
