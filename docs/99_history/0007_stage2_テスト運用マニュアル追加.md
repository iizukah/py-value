# 0007 Stage 2 テスト・運用・マニュアル追加

## 日付

2026-02-07

## 変更概要

Stage 2 に従い、以下の作業を実施した。

1. **01_specs の矛盾・不足確認（修正せず、99_diff に記載）**
   - ID の重複・欠番: REQ/ARC/API/DATA/UX/SC/CP を確認。重複・欠番なし。
   - タグ情報: DATA-01 の QuestionBase に `tags?: string[]` あり。UX-01/UX-02・DATA-02 と整合。
   - ワイヤーフレーム: wireframes.html が 0001 および mock の一部を未反映。99_diff に「ワイヤーフレーム未反映項目」として列挙（0004_stage2_specs_consistency_check.md）。
   - 枠組みとプラグインの疎結合: ARC-01/ARC-02、API-01/API-02、DATA-01/DATA-02 の境界を確認。依存の向きは問題なし。
   - 上記結果を `docs/01_specs/99_diff/0004_stage2_specs_consistency_check.md` に記録。

2. **05_test テスト仕様書の作成**
   - `docs/01_specs/05_test/TEST-01_test_plan.md` を新規作成。
   - 単体テスト（枠組み TC-001～TC-015、プラグイン TC-P01～TC-P07）、結合テスト（TC-INT-01～TC-INT-13）、E2E テスト（Playwright、TC-E2E-01～TC-E2E-13）の方針とテストケース ID を定義。
   - 各テスト種別で「要件 ID → テストケース ID」の対応表を記載。

3. **06_operations 運用・デプロイの記載**
   - `docs/01_specs/06_operations/INFRA-01_operations_and_deploy.md` を新規作成。
   - デプロイ・環境の方針（仕様全部を想定した環境設計、初回は最低限動作するデプロイ）を明文化。
   - 開発環境・本番環境の構成、環境変数・シークレット、ビルド・起動コマンド、初回デプロイの「最低限動作する」条件を記載。
   - シードデータ（ワークブック 1 件・問題 5 問）の配置先と投入方法を記載。
   - `env.example` と `seed/README.md` を 06_operations に配置。

4. **02_manuals 環境構築マニュアルの作成**
   - `docs/02_manuals/` を新設し、`01_環境構築マニュアル.md` を配置。
   - 必要なソフトウェアが存在しない前提で、Node.js・Git のインストール、リポジトリのクローン、依存インストール、環境変数の設定、開発サーバ起動、本番ビルド・デプロイの手順を詳細に記述。OS 別（Windows/macOS）の注意とトラブルシューティングを記載。

5. **コンテキスト整備**
   - AGENTS.md に「仕様の正本は docs/01_specs」「未反映の差分一覧は docs/01_specs/99_diff」を追記（必要に応じて実施）。

## 関連ドキュメント

- docs/01_specs/99_diff/0004_stage2_specs_consistency_check.md
- docs/01_specs/05_test/TEST-01_test_plan.md
- docs/01_specs/06_operations/INFRA-01_operations_and_deploy.md, env.example, seed/README.md
- docs/02_manuals/01_環境構築マニュアル.md
